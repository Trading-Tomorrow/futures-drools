package rules

dialect "java"

import org.futures.model.ExchangeRate;
import org.futures.model.PartialSignal;

// 💵 Bearish when local currency weakens (USD/BRL rises)
rule "Bearish - BRL depreciation"
when
    $e : ExchangeRate(pair == "USDBRL", changePercent > 1.5)
then
    insert(new PartialSignal("exchange", "SELL", 0.8, String.valueOf($e.getMonth())));
    System.out.println("💱 FX → BRL weakening detected → bearish for coffee prices ("
        + $e.getChangePercent() + "%)");
end

// 📈 Bullish when BRL strengthens (USD/BRL falls)
rule "Bullish - BRL appreciation"
when
    $e : ExchangeRate(pair == "USDBRL", changePercent < -1.5)
then
    insert(new PartialSignal("exchange", "BUY", 0.8, String.valueOf($e.getMonth())));
    System.out.println("💱 FX → BRL strengthening detected → bullish for coffee prices ("
        + $e.getChangePercent() + "%)");
end

// ⚠️ Volatile FX → uncertain / neutral stance
rule "Neutral - High FX volatility"
when
    $e : ExchangeRate(volatility > 3.0)
then
    insert(new PartialSignal("exchange", "HOLD", 0.5, String.valueOf($e.getMonth())));
    System.out.println("💱 FX → High volatility ("
        + $e.getVolatility() + "%) → neutral stance, rate=" + $e.getCurrentRate());
end
