package rules

dialect "java"

import org.futures.model.ExchangeRate;
import org.futures.model.PartialSignal;

// ðŸ’µ Bearish when local currency weakens (USD/BRL rises)
rule "Bearish - BRL depreciation"
when
    $e : ExchangeRate(pair == "USDBRL", changePercent > 1.5)
then
    insert(new PartialSignal("exchange", "SELL", 0.8, String.valueOf($e.getMonth())));
    System.out.println("ðŸ’± FX â†’ BRL weakening detected â†’ bearish for coffee prices ("
        + $e.getChangePercent() + "%)");
end

// ðŸ“ˆ Bullish when BRL strengthens (USD/BRL falls)
rule "Bullish - BRL appreciation"
when
    $e : ExchangeRate(pair == "USDBRL", changePercent < -1.5)
then
    insert(new PartialSignal("exchange", "BUY", 0.8, String.valueOf($e.getMonth())));
    System.out.println("ðŸ’± FX â†’ BRL strengthening detected â†’ bullish for coffee prices ("
        + $e.getChangePercent() + "%)");
end

// âš ï¸ Volatile FX â†’ uncertain / neutral stance
rule "Neutral - High FX volatility"
when
    $e : ExchangeRate(volatility > 3.0)
then
    insert(new PartialSignal("exchange", "HOLD", 0.5, String.valueOf($e.getMonth())));
    System.out.println("ðŸ’± FX â†’ High volatility ("
        + $e.getVolatility() + "%) â†’ neutral stance, rate=" + $e.getCurrentRate());
end
