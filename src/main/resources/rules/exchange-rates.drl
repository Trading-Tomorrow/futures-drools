package rules

dialect "java"

import org.futures.model.ExchangeRate;
import org.futures.model.PartialSignal;
import org.futures.model.Hypothesis;
import org.futures.model.Commodity
import java.util.Map
import java.util.HashMap;

// üíµ Bearish when local currency weakens
rule "Local currency depreciation - Brasil"
when
    $commodity :Commodity(name in ("Arabica","Robusta"))
    $er : ExchangeRate(country=="Brasil",month==$commodity.getMonth())
    eval($er.variation>=1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Fall of the local currency compared to the dollar",factors,0.8,"SELL"))
    System.out.println("üí± FX ‚Üí BRL weakening detected ‚Üí bearish for coffee prices ("+ $er.getVariation() + "%)");
end

rule "Local currency depreciation - Colombia"
when
    $commodity :Commodity(name in ("Arabica"))
    $er : ExchangeRate(country=="Colombia",month==$commodity.getMonth())
    eval($er.variation>=1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Fall of the local currency compared to the dollar",factors,0.5,"SELL"))
    System.out.println("üí± FX ‚Üí COP weakening detected ‚Üí bearish for coffee prices ("+ $er.getVariation() + "%)");
end

rule "Local currency depreciation - Vietnam"
when
    $commodity :Commodity(name in ("Robusta"))
    $er : ExchangeRate(country=="Vietnam",month==$commodity.getMonth())
    eval($er.variation>=1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Fall of the local currency compared to the dollar",factors,0.5,"SELL"))
    System.out.println("üí± FX ‚Üí VND weakening detected ‚Üí bearish for coffee prices ("+ $er.getVariation() + "%)");
end

// üìà Bullish when local currency strengthens
rule "Local currency depreciation for Arabica - Brasil"
when
    $commodity :Commodity(name in ("Arabica","Robusta"))
    $er : ExchangeRate(country=="Brasil",month==$commodity.getMonth())
    eval($er.variation<=-1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Rise of the local currency compared to the dollar",factors,0.8,"BUY"))
    System.out.println("üí± FX ‚Üí BRL strengthening detected ‚Üí Bullish for coffee prices ("+ $er.getVariation() + "%)");
end

rule "Local currency depreciation - Colombia"
when
    $commodity :Commodity(name in ("Arabica"))
    $er : ExchangeRate(country=="Colombia",month==$commodity.getMonth())
    eval($er.variation<=-1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Rise of the local currency compared to the dollar",factors,0.5,"BUY"))
    System.out.println("üí± FX ‚Üí COP strengthening detected ‚Üí Bullish for coffee prices ("+ $er.getVariation() + "%)");
end

rule "Local currency depreciation - Vietnam"
when
    $commodity :Commodity(name in ("Robusta"))
    $er : ExchangeRate(country=="Vietnam",month==$commodity.getMonth())
    eval($er.variation<=-1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Rise of the local currency compared to the dollar",factors,0.5,"BUY"))
    System.out.println("üí± FX ‚Üí VND strengthening detected ‚Üí Bullish for coffee prices ("+ $er.getVariation() + "%)");
end

// ‚ö†Ô∏è
rule "Local currency stabilization - Brasil"
when
    $commodity :Commodity(name in ("Arabica","Robusta"))
    $er : ExchangeRate(country=="Brasil",month==$commodity.getMonth())
    eval(-1.5<$er.variation<1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Stabilization of the local currency compared to the dollar",factors,0.5,"HOLD"))
    System.out.println("üí± FX ‚Üí BRL stabilization detected ‚Üí ("+ $er.getVariation() + "%)");
end

rule "Local currency stabilization - Colombia"
when
    $commodity :Commodity(name in ("Arabica"))
    $er : ExchangeRate(country=="Colombia",month==$commodity.getMonth())
    eval(-1.5<$er.variation<1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Stabilization of the local currency compared to the dollar",factors,0.3,"HOLD"))
    System.out.println("üí± FX ‚Üí COP stabilization detected ‚Üí ("+ $er.getVariation() + "%)");
end


rule "Local currency stabilization - Vietnam"
when
    $commodity :Commodity(name in ("Robusta"))
    $er : ExchangeRate(country=="Vietnam",month==$commodity.getMonth())
    eval(-1.5<$er.variation<1.5)
then

    Map<String, Object> factors = new HashMap<>();
    factors.put("exchangeRateVariation", $er.getVariation());
    factors.put("month", $commodity.getMonth());
    factors.put("country", $er.getCountry());

    insert(new Hypothesis($commodity.getName(),"Stabilization of the local currency compared to the dollar",factors,0.3,"HOLD"))
    System.out.println("üí± FX ‚Üí VND stabilization detected ‚Üí ("+ $er.getVariation() + "%)");
end

