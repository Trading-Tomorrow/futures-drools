package rules

dialect "java"

import org.futures.model.StockDemand;
import org.futures.model.PartialSignal;

// ‚òï Bullish when stocks are low and demand or exports rise
rule "Bullish - Low stock, high demand"
when
    $s : StockDemand(
        stockLevel < (avgStockLevel * 0.8),
        demandChange > 2.0 || exportChange > 2.0
    )
then
    String monthLabel = $s.getMonth() > 0 ? String.valueOf($s.getMonth()) : "CURRENT";
    insert(new PartialSignal("stock", "BUY", 0.85, monthLabel));
    System.out.println("‚òï Low stock & high demand ‚Üí bullish ("
        + $s.getRegion() + ", month=" + monthLabel + ")");
end

// üì¶ Bearish when stocks are high and demand drops
rule "Bearish - High stock, weak demand"
when
    $s : StockDemand(
        stockLevel > (avgStockLevel * 1.2),
        demandChange < -2.0
    )
then
    String monthLabel = $s.getMonth() > 0 ? String.valueOf($s.getMonth()) : "CURRENT";
    insert(new PartialSignal("stock", "SELL", 0.85, monthLabel));
    System.out.println("üì¶ High stock & weak demand ‚Üí bearish ("
        + $s.getRegion() + ", month=" + monthLabel + ")");
end

// ‚öñÔ∏è Neutral when stock levels and demand are within normal range
rule "Neutral - Balanced stock and demand"
when
    $s : StockDemand(
        stockLevel >= (avgStockLevel * 0.8),
        stockLevel <= (avgStockLevel * 1.2),
        demandChange >= -2.0,
        demandChange <= 2.0
    )
then
    String monthLabel = $s.getMonth() > 0 ? String.valueOf($s.getMonth()) : "CURRENT";
    insert(new PartialSignal("stock", "HOLD", 0.5, monthLabel));
    System.out.println("‚öñÔ∏è Balanced stock & demand ‚Üí neutral ("
        + $s.getRegion() + ", month=" + monthLabel + ")");
end
